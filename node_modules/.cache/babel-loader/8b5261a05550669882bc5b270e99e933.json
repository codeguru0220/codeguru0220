{"ast":null,"code":"import { timeData } from './time-data.generated';\n/**\n * Returns the best matching date time pattern if a date time skeleton\n * pattern is provided with a locale. Follows the Unicode specification:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#table-mapping-requested-time-skeletons-to-patterns\n * @param skeleton date time skeleton pattern that possibly includes j, J or C\n * @param locale\n */\n\nexport function getBestPattern(skeleton, locale) {\n  var skeletonCopy = '';\n\n  for (var patternPos = 0; patternPos < skeleton.length; patternPos++) {\n    var patternChar = skeleton.charAt(patternPos);\n\n    if (patternChar === 'j') {\n      var extraLength = 0;\n\n      while (patternPos + 1 < skeleton.length && skeleton.charAt(patternPos + 1) === patternChar) {\n        extraLength++;\n        patternPos++;\n      }\n\n      var hourLen = 1 + (extraLength & 1);\n      var dayPeriodLen = extraLength < 2 ? 1 : 3 + (extraLength >> 1);\n      var dayPeriodChar = 'a';\n      var hourChar = getDefaultHourSymbolFromLocale(locale);\n\n      if (hourChar == 'H' || hourChar == 'k') {\n        dayPeriodLen = 0;\n      }\n\n      while (dayPeriodLen-- > 0) {\n        skeletonCopy += dayPeriodChar;\n      }\n\n      while (hourLen-- > 0) {\n        skeletonCopy = hourChar + skeletonCopy;\n      }\n    } else if (patternChar === 'J') {\n      skeletonCopy += 'H';\n    } else {\n      skeletonCopy += patternChar;\n    }\n  }\n\n  return skeletonCopy;\n}\n/**\n * Maps the [hour cycle type](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/hourCycle)\n * of the given `locale` to the corresponding time pattern.\n * @param locale\n */\n\nfunction getDefaultHourSymbolFromLocale(locale) {\n  var hourCycle = locale.hourCycle;\n\n  if (hourCycle === undefined && // @ts-ignore hourCycle(s) is not identified yet\n  locale.hourCycles && // @ts-ignore\n  locale.hourCycles.length) {\n    // @ts-ignore\n    hourCycle = locale.hourCycles[0];\n  }\n\n  if (hourCycle) {\n    switch (hourCycle) {\n      case 'h24':\n        return 'k';\n\n      case 'h23':\n        return 'H';\n\n      case 'h12':\n        return 'h';\n\n      case 'h11':\n        return 'K';\n\n      default:\n        throw new Error('Invalid hourCycle');\n    }\n  } // TODO: Once hourCycle is fully supported remove the following with data generation\n\n\n  var languageTag = locale.language;\n  var regionTag;\n\n  if (languageTag !== 'root') {\n    regionTag = locale.maximize().region;\n  }\n\n  var hourCycles = timeData[regionTag || ''] || timeData[languageTag || ''] || timeData[\"\".concat(languageTag, \"-001\")] || timeData['001'];\n  return hourCycles[0];\n}","map":{"version":3,"sources":["D:/mitsukimiyagi-portfolio/node_modules/@formatjs/icu-messageformat-parser/lib/date-time-pattern-generator.js"],"names":["timeData","getBestPattern","skeleton","locale","skeletonCopy","patternPos","length","patternChar","charAt","extraLength","hourLen","dayPeriodLen","dayPeriodChar","hourChar","getDefaultHourSymbolFromLocale","hourCycle","undefined","hourCycles","Error","languageTag","language","regionTag","maximize","region","concat"],"mappings":"AAAA,SAASA,QAAT,QAAyB,uBAAzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,cAAT,CAAwBC,QAAxB,EAAkCC,MAAlC,EAA0C;AAC7C,MAAIC,YAAY,GAAG,EAAnB;;AACA,OAAK,IAAIC,UAAU,GAAG,CAAtB,EAAyBA,UAAU,GAAGH,QAAQ,CAACI,MAA/C,EAAuDD,UAAU,EAAjE,EAAqE;AACjE,QAAIE,WAAW,GAAGL,QAAQ,CAACM,MAAT,CAAgBH,UAAhB,CAAlB;;AACA,QAAIE,WAAW,KAAK,GAApB,EAAyB;AACrB,UAAIE,WAAW,GAAG,CAAlB;;AACA,aAAOJ,UAAU,GAAG,CAAb,GAAiBH,QAAQ,CAACI,MAA1B,IACHJ,QAAQ,CAACM,MAAT,CAAgBH,UAAU,GAAG,CAA7B,MAAoCE,WADxC,EACqD;AACjDE,QAAAA,WAAW;AACXJ,QAAAA,UAAU;AACb;;AACD,UAAIK,OAAO,GAAG,KAAKD,WAAW,GAAG,CAAnB,CAAd;AACA,UAAIE,YAAY,GAAGF,WAAW,GAAG,CAAd,GAAkB,CAAlB,GAAsB,KAAKA,WAAW,IAAI,CAApB,CAAzC;AACA,UAAIG,aAAa,GAAG,GAApB;AACA,UAAIC,QAAQ,GAAGC,8BAA8B,CAACX,MAAD,CAA7C;;AACA,UAAIU,QAAQ,IAAI,GAAZ,IAAmBA,QAAQ,IAAI,GAAnC,EAAwC;AACpCF,QAAAA,YAAY,GAAG,CAAf;AACH;;AACD,aAAOA,YAAY,KAAK,CAAxB,EAA2B;AACvBP,QAAAA,YAAY,IAAIQ,aAAhB;AACH;;AACD,aAAOF,OAAO,KAAK,CAAnB,EAAsB;AAClBN,QAAAA,YAAY,GAAGS,QAAQ,GAAGT,YAA1B;AACH;AACJ,KApBD,MAqBK,IAAIG,WAAW,KAAK,GAApB,EAAyB;AAC1BH,MAAAA,YAAY,IAAI,GAAhB;AACH,KAFI,MAGA;AACDA,MAAAA,YAAY,IAAIG,WAAhB;AACH;AACJ;;AACD,SAAOH,YAAP;AACH;AACD;AACA;AACA;AACA;AACA;;AACA,SAASU,8BAAT,CAAwCX,MAAxC,EAAgD;AAC5C,MAAIY,SAAS,GAAGZ,MAAM,CAACY,SAAvB;;AACA,MAAIA,SAAS,KAAKC,SAAd,IACA;AACAb,EAAAA,MAAM,CAACc,UAFP,IAGA;AACAd,EAAAA,MAAM,CAACc,UAAP,CAAkBX,MAJtB,EAI8B;AAC1B;AACAS,IAAAA,SAAS,GAAGZ,MAAM,CAACc,UAAP,CAAkB,CAAlB,CAAZ;AACH;;AACD,MAAIF,SAAJ,EAAe;AACX,YAAQA,SAAR;AACI,WAAK,KAAL;AACI,eAAO,GAAP;;AACJ,WAAK,KAAL;AACI,eAAO,GAAP;;AACJ,WAAK,KAAL;AACI,eAAO,GAAP;;AACJ,WAAK,KAAL;AACI,eAAO,GAAP;;AACJ;AACI,cAAM,IAAIG,KAAJ,CAAU,mBAAV,CAAN;AAVR;AAYH,GAvB2C,CAwB5C;;;AACA,MAAIC,WAAW,GAAGhB,MAAM,CAACiB,QAAzB;AACA,MAAIC,SAAJ;;AACA,MAAIF,WAAW,KAAK,MAApB,EAA4B;AACxBE,IAAAA,SAAS,GAAGlB,MAAM,CAACmB,QAAP,GAAkBC,MAA9B;AACH;;AACD,MAAIN,UAAU,GAAGjB,QAAQ,CAACqB,SAAS,IAAI,EAAd,CAAR,IACbrB,QAAQ,CAACmB,WAAW,IAAI,EAAhB,CADK,IAEbnB,QAAQ,CAAC,GAAGwB,MAAH,CAAUL,WAAV,EAAuB,MAAvB,CAAD,CAFK,IAGbnB,QAAQ,CAAC,KAAD,CAHZ;AAIA,SAAOiB,UAAU,CAAC,CAAD,CAAjB;AACH","sourcesContent":["import { timeData } from './time-data.generated';\n/**\n * Returns the best matching date time pattern if a date time skeleton\n * pattern is provided with a locale. Follows the Unicode specification:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#table-mapping-requested-time-skeletons-to-patterns\n * @param skeleton date time skeleton pattern that possibly includes j, J or C\n * @param locale\n */\nexport function getBestPattern(skeleton, locale) {\n    var skeletonCopy = '';\n    for (var patternPos = 0; patternPos < skeleton.length; patternPos++) {\n        var patternChar = skeleton.charAt(patternPos);\n        if (patternChar === 'j') {\n            var extraLength = 0;\n            while (patternPos + 1 < skeleton.length &&\n                skeleton.charAt(patternPos + 1) === patternChar) {\n                extraLength++;\n                patternPos++;\n            }\n            var hourLen = 1 + (extraLength & 1);\n            var dayPeriodLen = extraLength < 2 ? 1 : 3 + (extraLength >> 1);\n            var dayPeriodChar = 'a';\n            var hourChar = getDefaultHourSymbolFromLocale(locale);\n            if (hourChar == 'H' || hourChar == 'k') {\n                dayPeriodLen = 0;\n            }\n            while (dayPeriodLen-- > 0) {\n                skeletonCopy += dayPeriodChar;\n            }\n            while (hourLen-- > 0) {\n                skeletonCopy = hourChar + skeletonCopy;\n            }\n        }\n        else if (patternChar === 'J') {\n            skeletonCopy += 'H';\n        }\n        else {\n            skeletonCopy += patternChar;\n        }\n    }\n    return skeletonCopy;\n}\n/**\n * Maps the [hour cycle type](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/hourCycle)\n * of the given `locale` to the corresponding time pattern.\n * @param locale\n */\nfunction getDefaultHourSymbolFromLocale(locale) {\n    var hourCycle = locale.hourCycle;\n    if (hourCycle === undefined &&\n        // @ts-ignore hourCycle(s) is not identified yet\n        locale.hourCycles &&\n        // @ts-ignore\n        locale.hourCycles.length) {\n        // @ts-ignore\n        hourCycle = locale.hourCycles[0];\n    }\n    if (hourCycle) {\n        switch (hourCycle) {\n            case 'h24':\n                return 'k';\n            case 'h23':\n                return 'H';\n            case 'h12':\n                return 'h';\n            case 'h11':\n                return 'K';\n            default:\n                throw new Error('Invalid hourCycle');\n        }\n    }\n    // TODO: Once hourCycle is fully supported remove the following with data generation\n    var languageTag = locale.language;\n    var regionTag;\n    if (languageTag !== 'root') {\n        regionTag = locale.maximize().region;\n    }\n    var hourCycles = timeData[regionTag || ''] ||\n        timeData[languageTag || ''] ||\n        timeData[\"\".concat(languageTag, \"-001\")] ||\n        timeData['001'];\n    return hourCycles[0];\n}\n"]},"metadata":{},"sourceType":"module"}