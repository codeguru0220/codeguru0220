{"ast":null,"code":"import { getDistance, getLinkColor, getRandom, getRangeValue, rangeColorToRgb } from \"tsparticles-engine\";\nimport { drawLinkLine, drawLinkTriangle, setLinkFrequency } from \"./Utils\";\nexport class LinkInstance {\n  constructor(container) {\n    this.container = container;\n\n    this._drawLinkLine = (p1, link) => {\n      const p1LinksOptions = p1.options.links;\n\n      if (!p1LinksOptions?.enable) {\n        return;\n      }\n\n      const container = this.container,\n            options = container.actualOptions,\n            p2 = link.destination,\n            pos1 = p1.getPosition(),\n            pos2 = p2.getPosition();\n      let opacity = link.opacity;\n      container.canvas.draw(ctx => {\n        let colorLine;\n        const twinkle = p1.options.twinkle?.lines;\n\n        if (twinkle?.enable) {\n          const twinkleFreq = twinkle.frequency,\n                twinkleRgb = rangeColorToRgb(twinkle.color),\n                twinkling = getRandom() < twinkleFreq;\n\n          if (twinkling && twinkleRgb) {\n            colorLine = twinkleRgb;\n            opacity = getRangeValue(twinkle.opacity);\n          }\n        }\n\n        if (!colorLine) {\n          const linkColor = p1LinksOptions.id !== undefined ? container.particles.linksColors.get(p1LinksOptions.id) : container.particles.linksColor;\n          colorLine = getLinkColor(p1, p2, linkColor);\n        }\n\n        if (!colorLine) {\n          return;\n        }\n\n        const width = p1.retina.linksWidth ?? 0,\n              maxDistance = p1.retina.linksDistance ?? 0,\n              {\n          backgroundMask\n        } = options;\n        drawLinkLine({\n          context: ctx,\n          width,\n          begin: pos1,\n          end: pos2,\n          maxDistance,\n          canvasSize: container.canvas.size,\n          links: p1LinksOptions,\n          backgroundMask: backgroundMask,\n          colorLine,\n          opacity\n        });\n      });\n    };\n\n    this._drawLinkTriangle = (p1, link1, link2) => {\n      const linksOptions = p1.options.links;\n\n      if (!linksOptions?.enable) {\n        return;\n      }\n\n      const triangleOptions = linksOptions.triangles;\n\n      if (!triangleOptions.enable) {\n        return;\n      }\n\n      const container = this.container,\n            options = container.actualOptions,\n            p2 = link1.destination,\n            p3 = link2.destination,\n            opacityTriangle = triangleOptions.opacity ?? (link1.opacity + link2.opacity) / 2;\n\n      if (opacityTriangle <= 0) {\n        return;\n      }\n\n      container.canvas.draw(ctx => {\n        const pos1 = p1.getPosition(),\n              pos2 = p2.getPosition(),\n              pos3 = p3.getPosition(),\n              linksDistance = p1.retina.linksDistance ?? 0;\n\n        if (getDistance(pos1, pos2) > linksDistance || getDistance(pos3, pos2) > linksDistance || getDistance(pos3, pos1) > linksDistance) {\n          return;\n        }\n\n        let colorTriangle = rangeColorToRgb(triangleOptions.color);\n\n        if (!colorTriangle) {\n          const linkColor = linksOptions.id !== undefined ? container.particles.linksColors.get(linksOptions.id) : container.particles.linksColor;\n          colorTriangle = getLinkColor(p1, p2, linkColor);\n        }\n\n        if (!colorTriangle) {\n          return;\n        }\n\n        drawLinkTriangle({\n          context: ctx,\n          pos1,\n          pos2,\n          pos3,\n          backgroundMask: options.backgroundMask,\n          colorTriangle,\n          opacityTriangle\n        });\n      });\n    };\n\n    this._drawTriangles = (options, p1, link, p1Links) => {\n      const p2 = link.destination;\n\n      if (!(options.links?.triangles.enable && p2.options.links?.triangles.enable)) {\n        return;\n      }\n\n      const vertices = p2.links?.filter(t => {\n        const linkFreq = this._getLinkFrequency(p2, t.destination);\n\n        return p2.options.links && linkFreq <= p2.options.links.frequency && p1Links.findIndex(l => l.destination === t.destination) >= 0;\n      });\n\n      if (!vertices?.length) {\n        return;\n      }\n\n      for (const vertex of vertices) {\n        const p3 = vertex.destination,\n              triangleFreq = this._getTriangleFrequency(p1, p2, p3);\n\n        if (triangleFreq > options.links.triangles.frequency) {\n          continue;\n        }\n\n        this._drawLinkTriangle(p1, link, vertex);\n      }\n    };\n\n    this._getLinkFrequency = (p1, p2) => {\n      return setLinkFrequency([p1, p2], this._freqs.links);\n    };\n\n    this._getTriangleFrequency = (p1, p2, p3) => {\n      return setLinkFrequency([p1, p2, p3], this._freqs.triangles);\n    };\n\n    this._freqs = {\n      links: new Map(),\n      triangles: new Map()\n    };\n  }\n\n  drawParticle(context, particle) {\n    const {\n      links,\n      options\n    } = particle;\n\n    if (!links || links.length <= 0) {\n      return;\n    }\n\n    const p1Links = links.filter(l => options.links && this._getLinkFrequency(particle, l.destination) <= options.links.frequency);\n\n    for (const link of p1Links) {\n      this._drawTriangles(options, particle, link, p1Links);\n\n      if (link.opacity > 0 && (particle.retina.linksWidth ?? 0) > 0) {\n        this._drawLinkLine(particle, link);\n      }\n    }\n  }\n\n  async init() {\n    this._freqs.links = new Map();\n    this._freqs.triangles = new Map();\n  }\n\n  particleCreated(particle) {\n    particle.links = [];\n\n    if (!particle.options.links) {\n      return;\n    }\n\n    const ratio = this.container.retina.pixelRatio,\n          {\n      retina\n    } = particle,\n          {\n      distance,\n      width\n    } = particle.options.links;\n    retina.linksDistance = distance * ratio;\n    retina.linksWidth = width * ratio;\n  }\n\n  particleDestroyed(particle) {\n    particle.links = [];\n  }\n\n}","map":{"version":3,"sources":["D:/mitsukimiyagi-portfolio/node_modules/tsparticles-interaction-particles-links/esm/LinkInstance.js"],"names":["getDistance","getLinkColor","getRandom","getRangeValue","rangeColorToRgb","drawLinkLine","drawLinkTriangle","setLinkFrequency","LinkInstance","constructor","container","_drawLinkLine","p1","link","p1LinksOptions","options","links","enable","actualOptions","p2","destination","pos1","getPosition","pos2","opacity","canvas","draw","ctx","colorLine","twinkle","lines","twinkleFreq","frequency","twinkleRgb","color","twinkling","linkColor","id","undefined","particles","linksColors","get","linksColor","width","retina","linksWidth","maxDistance","linksDistance","backgroundMask","context","begin","end","canvasSize","size","_drawLinkTriangle","link1","link2","linksOptions","triangleOptions","triangles","p3","opacityTriangle","pos3","colorTriangle","_drawTriangles","p1Links","vertices","filter","t","linkFreq","_getLinkFrequency","findIndex","l","length","vertex","triangleFreq","_getTriangleFrequency","_freqs","Map","drawParticle","particle","init","particleCreated","ratio","pixelRatio","distance","particleDestroyed"],"mappings":"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","sourcesContent":["import { getDistance, getLinkColor, getRandom, getRangeValue, rangeColorToRgb, } from \"tsparticles-engine\";\nimport { drawLinkLine, drawLinkTriangle, setLinkFrequency } from \"./Utils\";\nexport class LinkInstance {\n    constructor(container) {\n        this.container = container;\n        this._drawLinkLine = (p1, link) => {\n            const p1LinksOptions = p1.options.links;\n            if (!p1LinksOptions?.enable) {\n                return;\n            }\n            const container = this.container, options = container.actualOptions, p2 = link.destination, pos1 = p1.getPosition(), pos2 = p2.getPosition();\n            let opacity = link.opacity;\n            container.canvas.draw((ctx) => {\n                let colorLine;\n                const twinkle = p1.options.twinkle?.lines;\n                if (twinkle?.enable) {\n                    const twinkleFreq = twinkle.frequency, twinkleRgb = rangeColorToRgb(twinkle.color), twinkling = getRandom() < twinkleFreq;\n                    if (twinkling && twinkleRgb) {\n                        colorLine = twinkleRgb;\n                        opacity = getRangeValue(twinkle.opacity);\n                    }\n                }\n                if (!colorLine) {\n                    const linkColor = p1LinksOptions.id !== undefined\n                        ? container.particles.linksColors.get(p1LinksOptions.id)\n                        : container.particles.linksColor;\n                    colorLine = getLinkColor(p1, p2, linkColor);\n                }\n                if (!colorLine) {\n                    return;\n                }\n                const width = p1.retina.linksWidth ?? 0, maxDistance = p1.retina.linksDistance ?? 0, { backgroundMask } = options;\n                drawLinkLine({\n                    context: ctx,\n                    width,\n                    begin: pos1,\n                    end: pos2,\n                    maxDistance,\n                    canvasSize: container.canvas.size,\n                    links: p1LinksOptions,\n                    backgroundMask: backgroundMask,\n                    colorLine,\n                    opacity,\n                });\n            });\n        };\n        this._drawLinkTriangle = (p1, link1, link2) => {\n            const linksOptions = p1.options.links;\n            if (!linksOptions?.enable) {\n                return;\n            }\n            const triangleOptions = linksOptions.triangles;\n            if (!triangleOptions.enable) {\n                return;\n            }\n            const container = this.container, options = container.actualOptions, p2 = link1.destination, p3 = link2.destination, opacityTriangle = triangleOptions.opacity ?? (link1.opacity + link2.opacity) / 2;\n            if (opacityTriangle <= 0) {\n                return;\n            }\n            container.canvas.draw((ctx) => {\n                const pos1 = p1.getPosition(), pos2 = p2.getPosition(), pos3 = p3.getPosition(), linksDistance = p1.retina.linksDistance ?? 0;\n                if (getDistance(pos1, pos2) > linksDistance ||\n                    getDistance(pos3, pos2) > linksDistance ||\n                    getDistance(pos3, pos1) > linksDistance) {\n                    return;\n                }\n                let colorTriangle = rangeColorToRgb(triangleOptions.color);\n                if (!colorTriangle) {\n                    const linkColor = linksOptions.id !== undefined\n                        ? container.particles.linksColors.get(linksOptions.id)\n                        : container.particles.linksColor;\n                    colorTriangle = getLinkColor(p1, p2, linkColor);\n                }\n                if (!colorTriangle) {\n                    return;\n                }\n                drawLinkTriangle({\n                    context: ctx,\n                    pos1,\n                    pos2,\n                    pos3,\n                    backgroundMask: options.backgroundMask,\n                    colorTriangle,\n                    opacityTriangle,\n                });\n            });\n        };\n        this._drawTriangles = (options, p1, link, p1Links) => {\n            const p2 = link.destination;\n            if (!(options.links?.triangles.enable && p2.options.links?.triangles.enable)) {\n                return;\n            }\n            const vertices = p2.links?.filter((t) => {\n                const linkFreq = this._getLinkFrequency(p2, t.destination);\n                return (p2.options.links &&\n                    linkFreq <= p2.options.links.frequency &&\n                    p1Links.findIndex((l) => l.destination === t.destination) >= 0);\n            });\n            if (!vertices?.length) {\n                return;\n            }\n            for (const vertex of vertices) {\n                const p3 = vertex.destination, triangleFreq = this._getTriangleFrequency(p1, p2, p3);\n                if (triangleFreq > options.links.triangles.frequency) {\n                    continue;\n                }\n                this._drawLinkTriangle(p1, link, vertex);\n            }\n        };\n        this._getLinkFrequency = (p1, p2) => {\n            return setLinkFrequency([p1, p2], this._freqs.links);\n        };\n        this._getTriangleFrequency = (p1, p2, p3) => {\n            return setLinkFrequency([p1, p2, p3], this._freqs.triangles);\n        };\n        this._freqs = {\n            links: new Map(),\n            triangles: new Map(),\n        };\n    }\n    drawParticle(context, particle) {\n        const { links, options } = particle;\n        if (!links || links.length <= 0) {\n            return;\n        }\n        const p1Links = links.filter((l) => options.links && this._getLinkFrequency(particle, l.destination) <= options.links.frequency);\n        for (const link of p1Links) {\n            this._drawTriangles(options, particle, link, p1Links);\n            if (link.opacity > 0 && (particle.retina.linksWidth ?? 0) > 0) {\n                this._drawLinkLine(particle, link);\n            }\n        }\n    }\n    async init() {\n        this._freqs.links = new Map();\n        this._freqs.triangles = new Map();\n    }\n    particleCreated(particle) {\n        particle.links = [];\n        if (!particle.options.links) {\n            return;\n        }\n        const ratio = this.container.retina.pixelRatio, { retina } = particle, { distance, width } = particle.options.links;\n        retina.linksDistance = distance * ratio;\n        retina.linksWidth = width * ratio;\n    }\n    particleDestroyed(particle) {\n        particle.links = [];\n    }\n}\n"]},"metadata":{},"sourceType":"module"}